### 数人云3.x线下包ci
##### 1. 根据tag获取或更新各项目源码：
使用Jenkins获取最新代码（Jenkins job任务）
##### 2. 获取各个项目最新tag信息：
git describe --tags `git rev-list --tags --max-count=1`
以key/value方式临时存储（map），拼接成demoregistry仓库地址
##### 3. 更新imagelist仓库地址：
根据key替换掉imageslist对应的仓库地址
##### 4. 更新monitor_run.sh.j2,run_3.0.sh.j2,docker-compose.yml,config.cfg,dockerprint.sh,load_registry_data.sh配置文件镜像仓库地址：
获取*run.sh.j2,docker-compose.yml镜像仓库地址，匹配更新的镜像仓库地址，若有更新则进行更新；
<font color=#DC143C>注：第二步到第四步打算使用一个程序实现（golang）</font>
##### 5. 更新offline-registry镜像仓库：
登录镜像仓库：docker login demoregistry.dataman-inc.com    
./offline-registry/clean_load_image.sh    
##### 6. 如有新的rpm，则更新rpm：
将新的rpm放到offline-yumrepo/packages/centos/7/x86_64/RPMS/    
cd /data/offlinesry/offline-yumrepo/packages/centos    
sh update_repodata.sh    
##### 7.打包上传：
cd /data/offlinesry    
执行./build_sry_pkg.sh <version>    
例如 ./build_sry_pkg.sh 3.3.0    

上传到240    
cd /data/    
sh scp_240.sh    